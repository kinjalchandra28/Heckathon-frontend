<div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
  <!-- Header -->
  <div class="flex items-center justify-between px-5 py-4 border-b border-gray-100">
    <h3 class="text-lg font-semibold text-gray-900">Alarm Pattern Analysis</h3>
    <button class="p-1 hover:bg-gray-100 rounded-lg">
      <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="5" r="2"/>
        <circle cx="12" cy="12" r="2"/>
        <circle cx="12" cy="19" r="2"/>
      </svg>
    </button>
  </div>

  <!-- Table -->
  <div class="p-4">
    <div class="border border-gray-200 rounded-xl overflow-hidden">
      <!-- Table Header -->
      <div class="grid grid-cols-12 gap-4 px-4 py-3 bg-gray-50 border-b border-gray-200">
        <div class="col-span-4 text-sm font-medium text-gray-600">Name</div>
        <div class="col-span-4 text-sm font-medium text-gray-600">Metric</div>
        <div class="col-span-2 text-sm font-medium text-gray-600">Status</div>
        <div class="col-span-2 text-sm font-medium text-gray-600">History</div>
      </div>

      <!-- Table Rows -->
      @for (metric of data.metrics; track metric.id) {
        <div class="grid grid-cols-12 gap-4 px-4 py-3 border-b border-gray-100 last:border-b-0 border-l-4"
             [ngClass]="getBorderColor(metric.status)">
          <div class="col-span-4 text-sm font-medium text-gray-900">{{ metric.name }}</div>
          <div class="col-span-4 text-sm text-gray-500">{{ metric.metric.type }}={{ metric.metric.value.toFixed(2) }}</div>
          <div class="col-span-2 text-sm font-medium" [ngClass]="getStatusColor(metric.status)">
            {{ metric.status }}
          </div>
          <div class="col-span-2 text-sm text-gray-600">
            {{ metric.history !== null ? metric.history : '-' }}
          </div>
        </div>
      }
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="flex items-center gap-2 px-5 py-3 border-t border-gray-100">
    <button (click)="onSpeak()"
            class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="Read aloud">
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
      </svg>
    </button>
    <button (click)="onCopy()"
            class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="Copy">
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
      </svg>
    </button>
    <button (click)="onRefresh()"
            class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="Regenerate">
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
      </svg>
    </button>
    <button (click)="onDislike()"
            class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
            title="Not helpful">
      <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"/>
      </svg>
    </button>
  </div>
</div>
